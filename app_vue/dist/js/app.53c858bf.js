(function(){"use strict";var e={322:function(e,t,a){var r=a(6369),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("Navbar"),t("router-view")],1)},o=[],s=(a(7658),function(){var e=this,t=e._self._c;return t("div",[t("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[t("div",{staticClass:"container-fluid"},[t("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"}}},[e._v("Restoran")]),e._m(0),t("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[t("ul",{staticClass:"navbar-nav me-auto mb-2 mb-lg-0"},[t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",class:{active:"JelaView"===this.$router.currentRoute.name},attrs:{to:{name:"JelaView"},tag:"a"}},[e._v("Jela")])],1),e.token?t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",class:{active:"OrderView"===this.$router.currentRoute.name},attrs:{to:{name:"OrderView"},tag:"a"}},[e._v("Naruči")])],1):e._e(),e.token?t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",class:{active:"OrdersView"===this.$router.currentRoute.name},attrs:{to:{name:"OrdersView"},tag:"a"}},[e._v("Narudžbine")])],1):e._e()]),e.token?e._e():t("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$router.push("/register")}}},[e._v("Register")]),e.token?t("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.logout()}}},[e._v("Logout")]):t("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.$router.push("/login")}}},[e._v("Login")])],1)],1)])])}),i=[function(){var e=this,t=e._self._c;return t("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[t("span",{staticClass:"navbar-toggler-icon"})])}],l=a(3822),u={name:"Navbar",computed:{...(0,l.rn)(["token"])},methods:{...(0,l.OI)(["removeToken","setToken"]),logout(){this.removeToken(),this.$router.push({name:"Login"})}},mounted(){localStorage.token&&this.setToken(localStorage.token)}},m=u,d=a(1001),c=(0,d.Z)(m,s,i,!1,null,null,null),p=c.exports,f={comments:{Navbar:p},mounted(){document.title="Restoran"},components:{Navbar:p}},b=f,h=(0,d.Z)(b,n,o,!1,null,null,null),v=h.exports,g=a(2631),k=function(){var e=this;e._self._c;return e._m(0)},_=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hello"},[t("p"),t("h1",[e._v("Restoran")]),t("p"),t("div",{staticClass:"proba"},[t("img",{staticClass:"slika",attrs:{alt:"logo",src:a(3191)}})]),t("br")])}],w={name:"HelloWorld",props:{msg:String}},z=w,C=(0,d.Z)(z,k,_,!1,null,"3255dcda",null),y=C.exports,S=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"register-container"},[t("b-row",[t("b-col",[t("h1",[e._v("Register")]),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("b-form-group",{staticClass:"mb-3",attrs:{label:"Username","label-for":"usernameInput"}},[t("b-form-input",{attrs:{id:"usernameInput",name:"username",type:"text",placeholder:"Username",state:e.usernameState,required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e.usernameState?e._e():t("b-form-invalid-feedback",[e._v(" Username must be at least 3 characters long. ")])],1),t("b-form-group",{staticClass:"mb-3",attrs:{label:"Password","label-for":"passwordInput"}},[t("b-form-input",{attrs:{id:"passwordInput",name:"password",type:"password",placeholder:"Password",state:e.passwordState,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.passwordState?e._e():t("b-form-invalid-feedback",[e._v(" Password must be at least 6 characters long. ")])],1),t("b-form-group",{staticClass:"mb-3",attrs:{label:"Confirm Password","label-for":"confirmPasswordInput"}},[t("b-form-input",{attrs:{id:"confirmPasswordInput",name:"confirmPassword",type:"password",placeholder:"Confirm Password",state:e.confirmPasswordState,required:""},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}}),e.confirmPasswordState?e._e():t("b-form-invalid-feedback",[e._v(" Passwords do not match or password is invalid. ")])],1),t("b-button",{staticClass:"mb-3",attrs:{type:"submit",variant:"success"}},[e._v("Register")])],1)],1)],1)],1)},x=[],O=a(7704),T=a(2972),P=a(2214),B=a(4884),j=a(3413),I=a(5715),N=a(660),J={name:"Register",components:{BContainer:O.h,BRow:T.T,BCol:P.l,BForm:B.e,BFormGroup:j.x,BFormInput:I.e,BButton:N.T},data(){return{username:"",password:"",confirmPassword:""}},computed:{usernameState(){return this.username.length>=3},passwordState(){return this.password.length>=6},confirmPasswordState(){return this.passwordState&&""!==this.confirmPassword&&this.password===this.confirmPassword}},methods:{...(0,l.nv)(["register"]),onSubmit(e){e.preventDefault(),this.usernameState&&this.passwordState&&this.confirmPasswordState&&(this.register({username:this.username,password:this.password}),this.$router.push({name:"HelloWorld"}))}}},R=J,$=(0,d.Z)(R,S,x,!1,null,"6e8253d2",null),V=$.exports,Z=function(){var e=this,t=e._self._c;return t("b-container",{staticClass:"login-container"},[t("b-row",[t("b-col",[t("h1",[e._v("Login")]),t("b-form",{on:{submit:e.onSubmit}},[t("b-form-group",{staticClass:"mb-3",attrs:{label:"Username","label-for":"usernameInput"}},[t("b-form-input",{attrs:{id:"usernameInput",name:"username",type:"text",placeholder:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),t("b-form-group",{staticClass:"mb-3",attrs:{label:"Password","label-for":"passwordInput"}},[t("b-form-input",{attrs:{id:"passwordInput",name:"password",type:"password",placeholder:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("b-button",{staticClass:"mb-3",attrs:{type:"submit",variant:"success"}},[e._v("Login")])],1)],1)],1)],1)},q=[],F={name:"Login",components:{BContainer:O.h,BRow:T.T,BCol:P.l,BForm:B.e,BFormGroup:j.x,BFormInput:I.e,BButton:N.T},data(){return{username:"",password:""}},methods:{...(0,l.nv)(["login"]),onSubmit(e){e.preventDefault();const t={username:this.username,password:this.password};this.login(t),this.$router.push({name:"HelloWorld"})}}},D=F,L=(0,d.Z)(D,Z,q,!1,null,"4e8d4f06",null),E=L.exports,U=function(){var e=this,t=e._self._c;return t("div",[t("b-container",[t("b-row",[t("b-col",[t("h1",[e._v("Jela")]),t("b-table",{attrs:{striped:"",hover:"",items:e.jela,fields:e.fields}})],1)],1)],1)],1)},A=[],G=a(5688),H={name:"JelaView",components:{BContainer:O.h,BRow:T.T,BCol:P.l,BTable:G.h},data(){return{fields:[{key:"id",label:"ID"},{key:"naziv",label:"Naziv"},{key:"opis",label:"Opis"},{key:"cena",label:"Cena"}]}},computed:{...(0,l.Se)(["getJela"]),jela(){return this.getJela}},mounted(){this.fetchJela()},methods:{...(0,l.nv)(["fetchJela"])}},W=H,M=(0,d.Z)(W,U,A,!1,null,null,null),X=M.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("b-container",[t("b-row",{staticClass:"mb-3"},[t("b-col",[t("h1",[e._v("Naruči jela")]),t("b-table",{attrs:{striped:"",hover:"",items:e.jela,fields:e.fields},on:{"row-clicked":e.addToCart}})],1)],1),t("b-row",{staticClass:"mb-3"},[t("b-col",[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.submitCart.apply(null,arguments)}}},[t("b-form-group",{staticClass:"mb-3",attrs:{label:"Zakazano Vreme","label-for":"zakazanoVremeInput"}},[t("b-form-datepicker",{attrs:{id:"zakazanoVremeInput",name:"zakazano_vreme",state:e.zakazano_vremeState,required:""},model:{value:e.zakazano_vreme,callback:function(t){e.zakazano_vreme=t},expression:"zakazano_vreme"}}),e.zakazano_vremeState?e._e():t("b-form-invalid-feedback",[e._v(" Zakazano vreme is required. ")])],1),t("b-form-group",{staticClass:"mb-3",attrs:{label:"Ime i Prezime","label-for":"imePrezimeInput"}},[t("b-form-input",{attrs:{id:"imePrezimeInput",name:"ime_prezime",type:"text",placeholder:"Ime i Prezime",state:e.ime_prezimeState,required:""},model:{value:e.ime_prezime,callback:function(t){e.ime_prezime=t},expression:"ime_prezime"}}),e.ime_prezimeState?e._e():t("b-form-invalid-feedback",[e._v(" Ime i Prezime is required. ")])],1),t("b-form-group",{staticClass:"mb-3",attrs:{label:"Adresa","label-for":"adresaInput"}},[t("b-form-input",{attrs:{id:"adresaInput",name:"adresa",type:"text",placeholder:"Adresa",state:e.adresaState,required:""},model:{value:e.adresa,callback:function(t){e.adresa=t},expression:"adresa"}}),e.adresaState?e._e():t("b-form-invalid-feedback",[e._v(" Adresa is required. ")])],1),t("b-form-group",{staticClass:"mb-3",attrs:{label:"Telefon","label-for":"telefonInput"}},[t("b-form-input",{attrs:{id:"telefonInput",name:"telefon",type:"text",placeholder:"Telefon",state:e.telefonState,required:""},model:{value:e.telefon,callback:function(t){e.telefon=t},expression:"telefon"}}),e.telefonState?e._e():t("b-form-invalid-feedback",[e._v(" Telefon is required. ")])],1),t("b-button",{staticClass:"mb-3",attrs:{type:"submit",variant:"success"}},[e._v("Pošalji")])],1)],1),t("b-col",{staticStyle:{"margin-left":"100px"}},[t("b-list-group",[e._l(e.cart,(function(a){return t("b-list-group-item",{key:a.id},[e._v(" "+e._s(a.naziv)+" x"+e._s(a.komada)+" ")])})),t("b-list-group-item",[t("strong",[e._v("Total Cena: "+e._s(e.totalCena)+" RSD")])])],2)],1)],1)],1)],1)},Q=[],Y=a(7581),ee=a(6607),te=a(7247),ae=a(8646),re={name:"OrderView",components:{BContainer:O.h,BRow:T.T,BCol:P.l,BTable:G.h,BButton:N.T,BListGroup:Y.N,BListGroupItem:ee.f,BForm:B.e,BFormGroup:j.x,BFormInput:I.e,BFormInvalidFeedback:te.h,BFormDatepicker:ae.i},data(){return{zakazano_vreme:"",ime_prezime:"",adresa:"",telefon:"",cart:[],fields:[{key:"id",label:"ID"},{key:"naziv",label:"Naziv"},{key:"opis",label:"Opis"},{key:"cena",label:"Cena"}]}},computed:{...(0,l.Se)(["getJela"]),jela(){return this.getJela},zakazano_vremeState(){return""!==this.zakazano_vreme},ime_prezimeState(){return""!==this.ime_prezime},adresaState(){return""!==this.adresa},telefonState(){return""!==this.telefon&&/^\d{1,11}$/.test(this.telefon)},totalCena(){return this.cart.reduce(((e,t)=>e+t.cena*t.komada),0)}},mounted(){this.fetchJela()},methods:{...(0,l.nv)(["fetchJela","submitNarudzbina"]),addToCart(e){const t=this.cart.find((t=>t.id===e.id));t?t.komada++:this.cart.push({...e,komada:1})},submitCart(){if(this.zakazano_vremeState&&this.ime_prezimeState&&this.adresaState&&this.telefonState){const e={zakazano_vreme:this.zakazano_vreme,ime_prezime:this.ime_prezime,adresa:this.adresa,telefon:this.telefon,stavke:this.cart.map((e=>({jelo_id:e.id,komada:e.komada,jedinicna_cena:e.cena})))};this.submitNarudzbina(e),this.$router.push({name:"OrdersView"})}}}},ne=re,oe=(0,d.Z)(ne,K,Q,!1,null,null,null),se=oe.exports,ie=function(){var e=this,t=e._self._c;return t("div",[t("b-container",[t("b-row",[t("b-col",[t("h1",[e._v("Narudžbine")]),t("b-table",{attrs:{striped:"",hover:"",items:e.orders,fields:e.fields},scopedSlots:e._u([{key:"cell(sadrzaj)",fn:function(a){return[t("ul",e._l(a.item.sadrzaj.split(", "),(function(a){return t("li",{key:a},[e._v(e._s(a))])})),0)]}}])})],1)],1)],1)],1)},le=[],ue={name:"OrdersView",components:{BContainer:O.h,BRow:T.T,BCol:P.l,BTable:G.h},data(){return{fields:[{key:"id",label:"ID"},{key:"zakazano_vreme",label:"Zakazano Vreme"},{key:"status",label:"Status"},{key:"cena",label:"Cena"},{key:"adresa",label:"Adresa"},{key:"sadrzaj",label:"Sadržaj"}]}},computed:{...(0,l.Se)(["getOrders"]),orders(){return this.getOrders}},mounted(){this.fetchOrders()},methods:{...(0,l.nv)(["fetchOrders"])}},me=ue,de=(0,d.Z)(me,ie,le,!1,null,null,null),ce=de.exports,pe=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("b-form",{on:{submit:e.onSubmit}},[t("b-form-group",{attrs:{label:"Email address:","label-for":"email"}},[t("b-form-input",{attrs:{id:"email",type:"email",placeholder:"Enter email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),t("b-form-group",{attrs:{label:"User Name:","label-for":"name"}},[t("b-form-input",{attrs:{id:"name",placeholder:"Enter name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[t("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Register")])],1)],1)},fe=[],be={name:"Register",data(){return{form:{email:"",name:"",password:""}}},methods:{...(0,l.nv)(["register"]),onSubmit(e){e.preventDefault(),this.register(this.form),this.$router.push({name:"Home"})}}},he=be,ve=(0,d.Z)(he,pe,fe,!1,null,"47030a3a",null),ge=(ve.exports,function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("b-form",{on:{submit:e.onSubmit}},[t("b-form-group",{attrs:{label:"User Name:","label-for":"username"}},[t("b-form-input",{attrs:{id:"username",placeholder:"Enter name",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("b-form-group",{attrs:{label:"Password:","label-for":"password"}},[t("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1)],1)}),ke=[],_e={name:"Login",data(){return{form:{username:"",password:""}}},methods:{...(0,l.nv)(["login"]),onSubmit(e){e.preventDefault(),this.login(this.form),this.$router.push({name:"Home"})}}},we=_e,ze=(0,d.Z)(we,ge,ke,!1,null,"0fddf4d1",null);ze.exports;r["default"].use(g.ZP);const Ce=[{path:"/",name:"HelloWorld",component:y},{path:"/jela",name:"JelaView",component:X},{path:"/orders",name:"OrdersView",component:ce},{path:"/order",name:"OrderView",component:se},{path:"/register",name:"Register",component:V},{path:"/login",name:"Login",component:E}],ye=new g.ZP({mode:"history",base:"/",routes:Ce});var Se=ye;a(2801);function xe(e){try{const t=e.split(".")[1],a=t.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(a).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(r)}catch(t){return console.error("Error decoding token:",t),null}}r["default"].use(l.ZP);var Oe=new l.ZP.Store({state:{token:"",jela:[],narudzbine:[],orders:[],cart:[]},getters:{getJela:e=>e.jela,getOrders:e=>e.orders,getNarudzbine:e=>e.narudzbine,getCart:e=>e.cart,getTotalCena:e=>e.cart.reduce(((e,t)=>e+t.jedinicna_cena*t.komada),0),decodedToken:e=>{if(e.token){const t=xe(e.token);return t}return null}},mutations:{setToken(e,t){e.token=t,localStorage.token=t},removeToken(e){e.token="",localStorage.token=""},setJela(e,t){e.jela=t},addNarudzbina(e,t){e.narudzbine.push(t)},addToCart(e,t){const a=e.cart.find((e=>e.id===t.id));a?a.komada++:e.cart.push({...t,komada:1})},setOrders(e,t){e.orders=t},clearCart(e){e.cart=[]}},actions:{register({commit:e},t){fetch("http://localhost:9001/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((t=>e("setToken",t.token)))},login({commit:e},t){fetch("http://localhost:9001/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((t=>{console.log(t),t.msg?alert(t.msg):e("setToken",t.token)}))},fetchJela({commit:e}){fetch("http://localhost:9000/jelo/").then((e=>e.json())).then((t=>{e("setJela",t)})).catch((e=>{console.error("Error fetching jela:",e)}))},fetchOrders({commit:e,getters:t}){const a=t.decodedToken,r=a.user;fetch(`http://localhost:9000/narudzbina/user/${r}`).then((e=>e.json())).then((t=>{e("setOrders",t)})).catch((e=>{console.error("Error fetching orders:",e)}))},submitNarudzbina({commit:e,dispatch:t,state:a},r){fetch("http://localhost:9000/narudzbina/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a.token}`},body:JSON.stringify(r)}).then((e=>e.json())).then((a=>{e("addNarudzbina",a),e("clearCart"),t("fetchOrders")})).catch((e=>{console.error("Error submitting narudzbina:",e)}))}}}),Te=a(6769),Pe=a(9425);a(7024);r["default"].use(Te.XG7),r["default"].use(Pe.A7),r["default"].config.productionTip=!1,new r["default"]({router:Se,store:Oe,render:e=>e(v)}).$mount("#app")},3191:function(e,t,a){e.exports=a.p+"img/restaurant.3bd548e1.jpg"}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,o){if(!r){var s=1/0;for(m=0;m<e.length;m++){r=e[m][0],n=e[m][1],o=e[m][2];for(var i=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(m--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[r,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,s=r[0],i=r[1],l=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var m=l(a)}for(t&&t(r);u<s.length;u++)o=s[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(m)},r=self["webpackChunkapp_vue"]=self["webpackChunkapp_vue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(322)}));r=a.O(r)})();
//# sourceMappingURL=app.53c858bf.js.map